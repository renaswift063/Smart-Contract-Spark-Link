# SparkNFT 收益

## 名词表

- 「刚刚被 `publish()` 出来的那个 NFT」为第 $L_0$ 层。
- 某用户在 `acceptShill()` 后会获得一个第 $L_n$ 层 NFT。
  > `Layer`
- 生成 $L_n$ 层的 NFT 需要调用 `acceptShill()` ，调用此函数时需要携带的 `msg.value` 为 $P_n$
  > `Price` 。其中 $P_0$ 没有意义， $P_1$ 由 `publish()` 的传入参数决定
- $D = P_n \div P_{n-1}$
  > 每层购买价格的衰减比率 (`Decay`)， $0 < D < 1$ ，由合约内置，全合约统一，不可更改
- 本内容树允许每个 NFT 派生出 $S$ 个下级 NFT
  > `Shill` ，由 `publish()` 传入参数决定。可以理解为 `S叉树` 。
- 内容树第$N$层的节点数量同样一$S$控制， $T_n = S^{n}$
- $L_n$ 的 NFT 获取利润后，需要上交给 $L_{n-1}$ 其所得的 $R$ 倍
  > `Royalty Fee` , $0 < R < 1$ ，由 `publish()` 传入参数决定。
  > 一般场景下不会大于 $10\%$ ，过大不利于调动传播者积极性。

## 场景

### 新用户购买第 $L_n$ 层所需付费金额

- $L_1$
$$
P_1  
$$

- $L_2$
$$
P_1D
$$

- $L_n$
$$
P_{n-1}D \\
= P_1D^n
$$

### 在有新用户购买第 $X$ 层的 NFT 后，第 $Y$ 层会收到的钱
收到的钱分为两部分
- 一部分留在了第 $Y$ 层
- 另一部分传递到上层

- $L_1$ , $L_0$
  - Keep in $L_0$
$$
P_1
$$

- $L_2$ 
  - Keep in $L_1$
$$
P_2(1-R) \\
= P_1D(1-R)
$$
  - Keep in $L_0$
$$
P_2R \\
= P_1DR
$$
- $L_n \qquad {n > 1}$ 
  - Keep in $L_{n-1}$
$$
P_n(1-R) \\
= P_{n-1}D(1-R) \\
= P_1D^{n-1}(1-R)
$$
  - Keep in $L_{n-2}$
$$
P_nR \\
= P_{n-1}DR \\
= P_1D^{n-1}R
$$
  - Keep in $L_0$
$$
P_nR^{n-1} \\
= P_{n-1}DR^{n-1}  \\
= P_1D^{n-1}R^{n-1} 
$$



### 当$N$层被填满时第$0$层的总收益
第$N$层的节点数量$T$受到$S$的控制，呈指数增长。
第$N$层的单价受$D$的控制，指数递减。
$L_0$从第$N$层的每个NFT获取的利润受$R$的控制，呈指数递减。
- 第$1$层
$$
P_1S
$$
- 第$2$层
$$
P_2S^2R \\
= P_1DS^2R
$$

- 第$N$层
$$
P_nS^nR^{n-1} \\
= P_1D^{n-1}S^nR^{n-1}
$$
即从第二层开始，第$N$层带给$L_0$的利润增长或下降幅度收到$D, S ,R$三个量的控制，其中D为常数，目前设定为$0.9$
当$DSR>1$即$SR>1 \div D$时当$N$层被填满时第$0$层的总收益持增长趋势
此公式同时适用于对任意一节点。